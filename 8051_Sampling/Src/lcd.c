#include <c8051f020.h>
#include <math.h>
#include "lcd.h"

sbit	SCK= 		    P3^4;
sbit	SDA=			P3^5;

//extern const unsigned char code AsciiFontData[95][16];
const unsigned char code AsciiFontData[95][16]	=
{
/*--  文字:     --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  !  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x98,0x18,0x00,0x00,0x00,

/*--  文字:  "  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x08,0x30,0x48,0x30,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  #  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x04,0x04,0x1F,0x04,0x1F,0x04,0x00,0x00,0x40,0xF8,0x40,0xF8,0x40,0x40,0x00,

/*--  文字:  $  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x0E,0x11,0x3F,0x10,0x0C,0x00,0x00,0x00,0x30,0x08,0xFE,0x88,0x70,0x00,0x00,

/*--  文字:  %  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x0E,0x11,0x0E,0x01,0x06,0x18,0x00,0x00,0x00,0x18,0x60,0x80,0x70,0x88,0x70,0x00,

/*--  文字:  &  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x0F,0x11,0x0F,0x01,0x01,0x00,0x00,0xF0,0x08,0xC8,0x28,0xF0,0x08,0x08,0x00,

/*--  文字:  '  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x08,0x68,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  (  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00,0x00,0x00,0x00,0xC0,0x30,0x08,0x04,0x00,

/*--  文字:  )  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,0x00,0x04,0x08,0x30,0xC0,0x00,0x00,0x00,

/*--  文字:  *  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00,0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,

/*--  文字:  +  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x01,0x01,0x01,0x0F,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0xE0,0x00,0x00,0x00,0x00,

/*--  文字:  ,  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x1A,0x1C,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  -  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  .  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  /  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x01,0x06,0x38,0x40,0x00,0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,

/*--  文字:  0  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x07,0x08,0x10,0x10,0x08,0x07,0x00,0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,

/*--  文字:  1  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x08,0x08,0x1F,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,

/*--  文字:  2  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x0C,0x10,0x10,0x10,0x11,0x0E,0x00,0x00,0x18,0x28,0x48,0x88,0x08,0x18,0x00,

/*--  文字:  3  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x0C,0x10,0x11,0x11,0x12,0x0C,0x00,0x00,0x30,0x08,0x08,0x08,0x88,0x70,0x00,

/*--  文字:  4  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x04,0x1F,0x00,0x00,0x00,0x00,0xC0,0x40,0x48,0xF8,0x48,0x48,0x00,

/*--  文字:  5  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x1F,0x11,0x12,0x12,0x12,0x11,0x00,0x00,0x30,0x08,0x08,0x08,0x08,0xF0,0x00,

/*--  文字:  6  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x07,0x08,0x11,0x11,0x19,0x00,0x00,0x00,0xF0,0x88,0x08,0x08,0x08,0xF0,0x00,

/*--  文字:  7  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x1C,0x10,0x10,0x13,0x1C,0x10,0x00,0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,

/*--  文字:  8  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x0E,0x11,0x11,0x11,0x11,0x0E,0x00,0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,

/*--  文字:  9  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x0F,0x10,0x10,0x10,0x09,0x07,0x00,0x00,0x00,0x98,0x88,0x88,0x10,0xE0,0x00,

/*--  文字:  :  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,

/*--  文字:  ;  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x0C,0x00,0x00,0x00,0x00,

/*--  文字:  <  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00,0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,

/*--  文字:  =  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,

/*--  文字:  >  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00,0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,

/*--  文字:  ?  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x1C,0x20,0x20,0x20,0x21,0x1E,0x00,0x00,0x00,0x00,0x18,0xD8,0x00,0x00,0x00,

/*--  文字:  @  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x07,0x08,0x13,0x14,0x17,0x08,0x07,0x00,0xE0,0x10,0xE8,0x28,0xC8,0x28,0xD0,0x00,

/*--  文字:  A  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x07,0x18,0x07,0x00,0x00,0x00,0x08,0x78,0xC8,0x40,0xC8,0x78,0x08,0x00,

/*--  文字:  B  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x11,0x11,0x11,0x12,0x0C,0x00,0x08,0xF8,0x08,0x08,0x08,0x88,0x70,0x00,

/*--  文字:  C  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x07,0x08,0x10,0x10,0x10,0x10,0x1C,0x00,0xE0,0x10,0x08,0x08,0x08,0x10,0x20,0x00,

/*--  文字:  D  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x10,0x10,0x10,0x08,0x07,0x00,0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,

/*--  文字:  E  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x11,0x11,0x17,0x10,0x08,0x00,0x08,0xF8,0x08,0x08,0xC8,0x08,0x10,0x00,

/*--  文字:  F  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x11,0x11,0x17,0x10,0x08,0x00,0x08,0xF8,0x08,0x00,0xC0,0x00,0x00,0x00,

/*--  文字:  G  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x07,0x08,0x10,0x10,0x10,0x1C,0x00,0x00,0xE0,0x10,0x08,0x08,0x48,0x70,0x40,0x00,

/*--  文字:  H  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x11,0x01,0x11,0x1F,0x10,0x00,0x08,0xF8,0x08,0x00,0x08,0xF8,0x08,0x00,

/*--  文字:  I  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x10,0x10,0x1F,0x10,0x10,0x00,0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,

/*--  文字:  J  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x10,0x10,0x1F,0x10,0x10,0x00,0x06,0x02,0x02,0x02,0xFC,0x00,0x00,0x00,

/*--  文字:  K  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x11,0x03,0x14,0x18,0x10,0x00,0x08,0xF8,0x08,0x80,0x68,0x18,0x08,0x00,

/*--  文字:  L  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x10,0x00,0x00,0x00,0x00,0x00,0x08,0xF8,0x08,0x08,0x08,0x08,0x18,0x00,

/*--  文字:  M  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x1E,0x01,0x1E,0x1F,0x10,0x00,0x08,0xF8,0x00,0xF8,0x00,0xF8,0x08,0x00,

/*--  文字:  N  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x1C,0x03,0x10,0x1F,0x10,0x00,0x08,0xF8,0x08,0x80,0x70,0xF8,0x00,0x00,

/*--  文字:  O  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x07,0x08,0x10,0x10,0x10,0x08,0x07,0x00,0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,

/*--  文字:  P  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x11,0x11,0x11,0x11,0x0E,0x00,0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  Q  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x07,0x08,0x10,0x10,0x10,0x08,0x07,0x00,0xE0,0x10,0x28,0x28,0x18,0x14,0xE4,0x00,

/*--  文字:  R  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x11,0x11,0x11,0x0E,0x00,0x00,0x08,0xF8,0x08,0x80,0x60,0x18,0x08,0x00,

/*--  文字:  S  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x0E,0x11,0x11,0x10,0x10,0x1C,0x00,0x00,0x38,0x08,0x08,0x88,0x88,0x70,0x00,

/*--  文字:  T  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x18,0x10,0x10,0x1F,0x10,0x10,0x18,0x00,0x00,0x00,0x08,0xF8,0x08,0x00,0x00,0x00,

/*--  文字:  U  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x10,0x00,0x10,0x1F,0x10,0x00,0x00,0xF0,0x08,0x08,0x08,0xF0,0x00,0x00,

/*--  文字:  V  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1E,0x11,0x00,0x11,0x1E,0x10,0x00,0x00,0x00,0xE0,0x18,0xE0,0x00,0x00,0x00,

/*--  文字:  W  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x00,0x1F,0x00,0x1F,0x10,0x00,0x00,0x80,0xF8,0x00,0xF8,0x80,0x00,0x00,

/*--  文字:  X  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x18,0x16,0x01,0x16,0x18,0x10,0x00,0x08,0x18,0x68,0x80,0x68,0x18,0x08,0x00,

/*--  文字:  Y  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1C,0x13,0x00,0x13,0x1C,0x10,0x00,0x00,0x00,0x08,0xF8,0x08,0x00,0x00,0x00,

/*--  文字:  Z  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x08,0x10,0x10,0x13,0x1C,0x10,0x00,0x00,0x08,0x38,0xC8,0x08,0x08,0x18,0x00,

/*--  文字:  [  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00,0x00,0x00,0x00,0xFC,0x04,0x04,0x04,0x00,

/*--  文字:  \  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x30,0x0C,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x1C,0x02,0x00,

/*--  文字:  ]  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00,0x00,0x04,0x04,0x04,0xFC,0x00,0x00,0x00,

/*--  文字:  ^  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x20,0x40,0x40,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  _  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x00,

/*--  文字:  `  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x40,0x40,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  a  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x02,0x02,0x01,0x00,0x00,0x00,0x30,0x48,0x88,0x88,0xF8,0x08,0x00,

/*--  文字:  b  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x01,0x02,0x02,0x02,0x01,0x00,0x00,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,

/*--  文字:  c  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x01,0x02,0x02,0x02,0x01,0x00,0x00,0xE0,0x10,0x08,0x08,0x08,0x10,0x00,

/*--  文字:  d  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x02,0x02,0x12,0x1F,0x00,0x00,0xF0,0x08,0x08,0x08,0x10,0xF8,0x08,

/*--  文字:  e  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x02,0x02,0x02,0x01,0x00,0x00,0xF0,0x88,0x88,0x88,0x88,0x90,0x00,

/*--  文字:  f  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x02,0x02,0x0F,0x12,0x12,0x18,0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,

/*--  文字:  g  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x02,0x02,0x03,0x02,0x00,0x00,0xAC,0x52,0x52,0x52,0x92,0x0C,0x00,

/*--  文字:  h  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x01,0x02,0x02,0x02,0x01,0x00,0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,

/*--  文字:  i  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x02,0x1A,0x1B,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,

/*--  文字:  j  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x02,0x1A,0x1B,0x00,0x00,0x00,0x06,0x02,0x02,0x02,0xFC,0x00,0x00,

/*--  文字:  k  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x10,0x1F,0x00,0x00,0x03,0x02,0x02,0x00,0x08,0xF8,0x48,0x80,0x68,0x18,0x08,0x00,

/*--  文字:  l  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x10,0x10,0x1F,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,

/*--  文字:  m  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x03,0x02,0x03,0x02,0x01,0x00,0x00,0x08,0xF8,0x00,0xF8,0x00,0xF8,0x08,0x00,

/*--  文字:  n  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x03,0x01,0x02,0x02,0x02,0x01,0x00,0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,

/*--  文字:  o  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x01,0x02,0x02,0x01,0x00,0x00,0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,

/*--  文字:  p  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x03,0x01,0x02,0x02,0x02,0x01,0x00,0x02,0xFE,0x0A,0x08,0x08,0x08,0xF0,0x00,

/*--  文字:  q  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x02,0x02,0x02,0x03,0x00,0x00,0xF0,0x08,0x08,0x08,0x12,0xFE,0x02,

/*--  文字:  r  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x02,0x03,0x01,0x02,0x02,0x03,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,

/*--  文字:  s  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x01,0x02,0x02,0x02,0x03,0x00,0x00,0x00,0x98,0x48,0x48,0x48,0x30,0x00,0x00,

/*--  文字:  t  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x02,0x02,0x0F,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0xF0,0x08,0x08,0x00,0x00,

/*--  文字:  u  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x03,0x00,0x00,0x00,0x02,0x03,0x00,0x00,0xF0,0x08,0x08,0x08,0x10,0xF8,0x08,

/*--  文字:  v  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x03,0x02,0x00,0x00,0x02,0x03,0x02,0x00,0x00,0xE0,0x18,0x20,0xC0,0x00,0x00,

/*--  文字:  w  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x03,0x00,0x03,0x00,0x03,0x02,0x00,0x00,0xC0,0x38,0xC0,0x38,0xC0,0x00,0x00,

/*--  文字:  x  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x02,0x03,0x00,0x02,0x03,0x02,0x00,0x00,0x08,0x18,0xE8,0xE0,0x18,0x08,0x00,

/*--  文字:  y  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x02,0x03,0x02,0x00,0x00,0x02,0x03,0x02,0x02,0x02,0xE2,0x1C,0x30,0xC0,0x00,0x00,

/*--  文字:  z  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x03,0x02,0x02,0x02,0x03,0x02,0x00,0x00,0x08,0x18,0x68,0x88,0x08,0x18,0x00,

/*--  文字:  {  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0x01,0x7E,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0x04,0x00,0x00,

/*--  文字:  |  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,

/*--  文字:  }  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x00,0x40,0x7E,0x01,0x00,0x00,0x00,0x00,0x00,0x04,0xFC,0x00,0x00,0x00,0x00,

/*--  文字:  ~  --*/
/*--  宋体9;  此字体下对应的点阵为：宽x高=8x15   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=8x16  --*/
0x00,0x60,0x80,0x80,0x40,0x20,0x20,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};

/** 
 * @brief 延时函数
 * @param time 延时的毫秒数
 * @return 无
 */
void Delayms(unsigned int time)
{
	int i;
	while(time--)
	for(i=0;i<=20;i++);
}

/** 
 * @brief 写数据函数，由LCDWrite等函数调用。与写命令函数基本相同。
 * @param dat 十六进制数据
 * @return 无
 * @note LCD通常使用串行通信，这意味着数据线（SDA）上一次只能传输一个比特。
 * 		 为了发送一个字节（8位），必须逐位发送，从最高位开始。
 * 		 另：在串行通信中，必须先将要发送的位放在数据线上，
 *		 然后通过时钟信号（SCK）的控制来告诉接收方（LCD）何时读取这个位。
 */
void WriteCMD(unsigned char cmd) // 写命令函数 由LCDWrite等函数调用
{
    unsigned char data i,j,k; // data关键字表示将i,j,k存储在内部RAM中（直接寻址，访问速度最快）
	    Clr_LCD_RS; // 将RS线拉低，选择写命令
		for(i=0;i<8;i++) // 每次循环都处理cmd中的一个比特并将其发送到LCD
	    { 
			 j=cmd;	 			 
			 SDA=cmd&0x80; // 取出cmd的最高位，并将其赋值给SDA线（数据线）
			 SCK=0; // 将时钟线SCK拉低，准备发送数据
			 for(k = 0;k < 3;k ++); // 延时
	         SCK=1;	// 将时钟线SCK拉高（LCD在SCK的这个上升沿读取SDA线上的数据）
			 for(k = 0;k < 3;k ++); // 延时     
			 cmd=j<<1; // 将j左移一位，这样在下一次循环中就可以发送下一个比特
		}
		Set_LCD_RS; // 将RS线拉高，为写数据做准备
}

/** 
 * @brief 写数据函数，由LCDWrite等函数调用。与写命令函数基本相同。
 * @param dat 要发送到LCD的数据，表示当前列 8 个像素的亮暗状态。通过位操作更新当前点的亮暗信息（点亮或熄灭）
 * @return 无
 */
void WriteData(unsigned char dat)
{
    unsigned char data i,j,k;
	    Set_LCD_RS; // 将RS线拉高，选择写数据
		for(i=0;i<8;i++)
	    { 
			 j=dat;
			 SDA=dat&0x80;
			 SCK=0;
			 for(k = 0;k < 3;k ++);//延时
	         SCK=1;	  
			 for(k = 0;k < 3;k ++);//延时   
			 dat=j<<1;
		}
		Clr_LCD_RS; // 将RS线拉高，为写命令做准备
}

/** 
 * @brief 向LCD发信息（命令/数据）
 * @param type W_CMD（=1）->发命令；W_DAT（=0）->发数据
 * @param dat 十六进制命令/数据
 * @return 无
 */
void LCDWrite(unsigned char type,unsigned char dat)		
{ 

	if(type)
	{
		WriteCMD(dat);
	}
	else
	{
		WriteData(dat);
	}
}

/** 
 * @brief LCD初始化函数
 * @param type W_CMD（=1）->发命令；W_DAT（=0）->发数据
 * @param dat 十六进制命令/数据
 * @return 无
 * @note 引脚部分的配置置于系统初始化部份了。
 * @note P3MDOUT |= BIT(4) + BIT(5); //P3.4 P3.5 LCD IO 口设置
 * @note P74OUT |= BIT0;             //P4.0-P4.4设置为推挽输出
 * @note 注意串行模式下LCD的时钟线和数据线都要设置为P模式（？）（推挽？）
 * @note 命令可在手册中查到。
 */
void LCDInit()
{
	Set_LCD_RST; // 取消复位
	Delayms(10);
	Clr_LCD_RST; // 执行复位
	Delayms(10);
	Set_LCD_RST; // 取消复位
	Delayms(10);
	LCDWrite(W_CMD,0xE2); // 软件复位
	LCDWrite(W_CMD,0xA3); // Bias（偏压比，选择点电压与非选择点电压的比值）设置	（0xA3->1/7，显示效果最好；0xA2->1/9，底色偏深）
	LCDWrite(W_CMD,0xA1); // SEG镜像选择（0xA0正常，0xA1左右镜像）
	LCDWrite(W_CMD,0xC0); // COM镜像选择（0xC0正常，0xC8上下镜像）
	LCDWrite(W_CMD,0x26); // 选择调节电阻比率（Select regulation resistor ratio）（？）
	// 0x24（后三位100）全白，0x27（后三位111）全黑
	Delayms(5);

	// 内部电源管理，三条指令间隔时间2ms
	LCDWrite(W_CMD,0x2C); // 00101100
	Delayms(10);
	LCDWrite(W_CMD,0x2E); // 00101110
	Delayms(10);
	LCDWrite(W_CMD,0x2F); // 00101111
	Delayms(10);

//	LCDWrite(W_CMD,0x24); // 电压调整寄存器高位 范围：0x21-0x27 
	LCDWrite(W_CMD,0x81); // 电压模式选择
	LCDWrite(W_CMD,0x20); // 电压调整寄存器低位 范围：0x00-0x3f（？）
	Delayms(10);
	LCDWrite(W_CMD,0xF8); // Set Booster（双命令）
	LCDWrite(W_CMD,0x01); // Set Booster
    Delayms(5);
	LCDWrite(W_CMD,0xAF); // 开启显示        
//	LCDWrite(W_CMD,0x40); // 从首行开始显示
}

/** 
 * @brief 设置LCD坐标函数
 * @param x 0-127
 * @param y 0-7
 * @return 无
 * @note 以LCD左上角为原点
 */
void LCD_setXY(unsigned char X, unsigned char Y)
{
	unsigned char gao,di; // 用于存储计算出的列地址的高位和低位
	WriteCMD(0xB0 | Y); // 设置页地址
	gao = X & 0xf0; // 取出列地址的高4位
	gao = gao >> 4;
	di = X & 0x0f; // 取出列地址的低4位
	WriteCMD(0x10 | gao);  //set column address MSB（最高有效位）
    WriteCMD(0x00 | di);  //set column address LSB（最低有效位）

}

/** 
 * @brief LCD画点函数
 * @param x 0-127
 * @param y 0-7
 * @return 无
 * @note 以LCD左上角为原点，在xy位置画点。一次一列八个点。
 */
void LCD_draw_point(unsigned char x,unsigned char y) 
{
	LCD_setXY(x,y);
	LCDWrite(W_DAT,0xff) ;
}

/** 
 * @brief LCD清屏函数
 * @return 无
 */
void Clear()
{
   unsigned char page,j;
	 for(page=0xB7;page>=0xB0;page--) // 遍历LCD屏幕的每一页（垂直方向）
    {  
	LCDWrite(W_CMD,page);
	LCDWrite(W_CMD,0x10); // 设置列地址的高四位
	LCDWrite(W_CMD,0x00); // 设置列地址的低四位
     for(j=0;j<128;j++) // 遍历每一页中的所有列（水平方向）
        {  
         WriteData(0x00); // 清除当前列的像素
        }  
    } 
}

/** 
 * @brief LCD画单个像素点函数
 * @param pixel_x 水平方向的像素位置（范围 0-127）
 * @param pixel_y 垂直方向的像素位置（范围 0-63）
 * @return 无
 * @note 在连续操作同一显示字节时，本函数保留原始数据，只画新像素点
 * @note 以LCD左下角为原点
 */
void DrawPoint(unsigned char pixel_x,unsigned char pixel_y)
{
    unsigned char data_new, page_y; 
    // data_new：要发送的数据
    // page_y：由 pixel_y 计算出的页地址（0-7），对应屏幕上的垂直段

    static unsigned char data_old = 0, y_old = 0, x_old = 0; 
    // data_old：上一次写入 LCD 的字节数据
    // y_old, x_old：上一次绘制点的页地址和列地址
    // 静态变量作用：静态变量的值在函数调用结束后会保存在静态存储区，不会丢失，下一次函数调用时可以直接使用上一次的值，便于判断是否在连续操作同一个字节。

    page_y = (int)(pixel_y / 8); 
    // 将 pixel_y 坐标除以 8，计算像素所在的页地址 page_y（每页控制 8 行像素）

    if ((page_y == y_old) && (pixel_x == x_old)) 
        // 判断是否在连续操作同一个字节：
        // 条件：页地址 (page_y) 和列地址 (pixel_x) 与上次绘制点一致
        data_new = data_old | (0x80 >> (pixel_y % 8)); 
        // 如果当前点和上次点在同一个字节，保留之前的像素数据 (data_old)，
        // 并通过按位或操作更新当前像素点的位置。

    else 
        data_new = 0x80 >> (pixel_y % 8); 
        // 如果不是同一个字节，则直接设置当前字节，仅更新当前像素点。

    LCD_setXY(pixel_x, abs(page_y - 7)); 
    // 设置显示位置 (pixel_x, abs(page_y - 7))
    // 由于屏幕页地址（硬件布局）是从上到下排列，而逻辑坐标（用户使用的坐标）是从下到上递增，
    // 因此需要用 abs(page_y - 7) 转换页地址。

    LCDWrite(W_DAT, data_new); 
    // 向 LCD 写入 data_new 数据，更新当前字节内容。

    // 更新静态变量，保存当前的绘制状态
    data_old = data_new; // 保存当前写入的字节数据
    y_old = page_y; // 保存当前的页地址
    x_old = pixel_x; // 保存当前的列地址
}

/** 
 * @brief 在LCD屏幕的指定位置绘制一个16×8像素字符
 * @param C 要显示的字符（可传入ascii码）
 * @param row 行（范围 0-3）
 * @param col 列（范围 0-15）
 * @return 无
 * @note 每个字符占LCD屏幕的16*8个点
 * @note 以LCD左上角为原点
 */
void Drawchar(unsigned char C,unsigned char row,unsigned char col)
{	
    unsigned char b,Row,Col;
    unsigned char k;
	k=C-0x20; // 通过 C-0x20 计算出字符在字库 AsciiFontData 中的索引位置。ASCII中从 0x20 开始存储可显示字符，因此减去 0x20。
	Row=(63-(16*row));
	Col=8*col;

	for(b = 0;b<16;b++)
	{
	  unsigned char F;
	  F=2*b;
	 if(b<8)
	 {
	  if((AsciiFontData[k][b]&0x80)!=0)
	  DrawPoint(Col+b,Row);
	  	
	  
	  if((AsciiFontData[k][b]&0x40)!=0)
	  DrawPoint(Col+b,Row-1);
	   	
	  if((AsciiFontData[k][b]&0x20)!=0)
	  DrawPoint(Col+b,Row-2);
	   	
	  if((AsciiFontData[k][b]&0x10)!=0)
	  DrawPoint(Col+b,Row-3);

	  if((AsciiFontData[k][b]&0x08)!=0)
	  DrawPoint(Col+b,Row-4);
	  	
	  if((AsciiFontData[k][b]&0x04)!=0)
	  DrawPoint(Col+b,Row-5);
	   
	  if((AsciiFontData[k][b]&0x02)!=0)
      DrawPoint(Col+b,Row-6);
	  	
	  if((AsciiFontData[k][b]&0x01)!=0)
	  DrawPoint(Col+b,Row-7);
	  }
	  else
	  {
	   if((AsciiFontData[k][b]&0x80)!=0)
	  DrawPoint(Col+b-8,Row-8);
	  	
	  
	  if((AsciiFontData[k][b]&0x40)!=0)
	  DrawPoint(Col+b-8,Row-9);
	   	
	  if((AsciiFontData[k][b]&0x20)!=0)
	  DrawPoint(Col+b-8,Row-10);
	   	
	  if((AsciiFontData[k][b]&0x10)!=0)
	  DrawPoint(Col+b-8,Row-11);

	  if((AsciiFontData[k][b]&0x08)!=0)
	  DrawPoint(Col+b-8,Row-12);
	  	
	  if((AsciiFontData[k][b]&0x04)!=0)
	  DrawPoint(Col+b-8,Row-13);
	   
	  if((AsciiFontData[k][b]&0x02)!=0)
      DrawPoint(Col+b-8,Row-14);
	  	
	  if((AsciiFontData[k][b]&0x01)!=0)
	  DrawPoint(Col+b-8,Row-15);
	  }	  
	
	}

}

/*********************************************************************
*在屏幕上显示一串字符
*参数：C【】字符串  	row 起始行:0~3  low 起始列:0~15
*********************************************************************/
void DrawcharS(unsigned char *C,unsigned char row,unsigned char col)
{
  int flag=0,i=0;
  unsigned char R,L,TOTAL;
  TOTAL=(row*16)+col;
  if(TOTAL>63||row>3||col>15)
   {flag=1;}

  while(flag==0)
  {
   if(*C!='\0')
   {
     R=	(TOTAL+i)/16 ;
   	 L=	(TOTAL+i)%16;
	 Drawchar(*C,R,L);
	 C++;
	 i++;
	 if((TOTAL+i)>63)
	  {
	   	 flag=1;
	  }
   }
   else
   {
     flag=1;
   }
 }

}



